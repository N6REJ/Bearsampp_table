"use strict";function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}var admintools_scan_error_callback=scan_dummy_error_handler,admintools_scan_modal=null,admintools_scan_timerid=-1,admintools_scan_responseago=0;function scan_dummy_error_handler(a){return"object"===_typeof(a)&&(a=a.responseText),void console.log(a)}function doScanAjax(a,b){Joomla.request({url:a,method:"GET",perform:!0,onSuccess:function onSuccess(a){var c=JSON.parse(a);b(c)},onError:function onError(a){scan_dummy_error_handler(a)}})}function startScan(){var a=document.getElementById("scanModal");admintools_scan_modal=new bootstrap.Modal(a,{keyboard:!1,backdrop:"static"}),admintools_scan_modal.show(),start_scan_timer(),doScanAjax(Joomla.getOptions("admintools.Scan.urlStart"),function(a){processScanStep(a)})}function processScanStep(a){if(stop_scan_timer(),!1==a.status)admintools_scan_error_callback(a.error);else{if(a.done)return void(window.location=Joomla.getOptions("admintools.Scan.urlBack"));start_scan_timer(),doScanAjax(Joomla.getOptions("admintools.Scan.urlStep"),function(a){processScanStep(a)})}}function start_scan_timer(){0<=admintools_scan_timerid&&window.clearInterval(admintools_scan_timerid),admintools_scan_responseago=0,set_scan_timermsg(),admintools_scan_timerid=window.setInterval("step_scan_timer()",1e3)}function step_scan_timer(){admintools_scan_responseago++,set_scan_timermsg()}function stop_scan_timer(){0<=admintools_scan_timerid&&window.clearInterval(admintools_scan_timerid)}function set_scan_timermsg(){document.getElementById("admintools-lastupdate-text").innerHTML=Joomla.getOptions("admintools.Scan.lastResponseMessage").replace("%s",admintools_scan_responseago)}window.addEventListener("DOMContentLoaded",function(){var a=document.getElementById("commentModal");a&&a.addEventListener("show.bs.modal",function(b){var c=b.relatedTarget,d=c.getAttribute("data-bs-comment"),e=a.querySelector(".modal-body");e.innerHTML=d});var b=document.getElementById("toolbar-startScan");b&&b.addEventListener("click",startScan);var c=document.querySelectorAll("a[href='#newScan']");c&&c.forEach(function(a){return a.addEventListener("click",startScan)})});

//# sourceMappingURL=Scan.min.js.map