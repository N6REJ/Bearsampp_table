var ACF_Video_Input_Previewer=function(){function e(){this.initAll(),this.initEvents()}var t=e.prototype;return t.initAll=function(){if(window.IntersectionObserver){var e=document.querySelectorAll(".acf-video-url-input-value");if(e){var i=this,t=new IntersectionObserver(function(e,t){e.forEach(function(e){if(e.isIntersecting){var t=e.target;if(""===t.value)return;if(t.classList.contains("done"))return;t.classList.add("done"),i.update(t)}})},{rootMargin:"0px 0px 0px 0px"});e.forEach(function(e){t.observe(e)})}}},t.initEvents=function(){document.addEventListener("click",function(e){this.onClear(e)}.bind(this)),document.addEventListener("change",function(e){this.onChange(e)}.bind(this)),document.addEventListener("focusout",function(e){this.onFinishTyping(e)}.bind(this))},t.onClear=function(e){var t=e.target.closest(".button-clear");if(t){var i=t.closest(".controls");if(i)if(i.querySelector(".acf-video-previewer-wrapper")){var o=new CustomEvent("focusout",{bubbles:!0});i.querySelector(".acf-video-url-input-value").dispatchEvent(o)}}},t.onChange=function(e){var t=e.target.closest(".controls");if(t&&t.querySelector(".acf-video-previewer-wrapper")){var i=new CustomEvent("focusout",{bubbles:!0});t.querySelector(".acf-video-url-input-value").dispatchEvent(i)}},t.onFinishTyping=function(e){var t=e.target.closest(".acf-video-url-input-value");t&&this.update(t)},t.update=function(e){var t=e.closest(".controls").querySelector(".acf-video-previewer-wrapper");if((t.innerHTML="")!==e.value){var i=this.getVideoDetails(e.value);switch(t.classList.add("is-visible"),i.provider){case"youtube":case"vimeo":case"dailymotion":t.innerHTML='<iframe height="280" src="'+i.url+'" />';break;case"facebook":t.innerHTML='<iframe width="476" height="476" src="https://www.facebook.com/plugins/video.php?height=476&width=476&href='+i.url+'"></iframe>';break;case"selfhostedvideo":var o=i.url.replace(/^\/|\/$/g,""),r=[t.dataset.rootUrl,o].join("/");t.innerHTML='<video controls><source src="'+r+'" /></video>'}}else t.classList.remove("is-visible")},t.getVideoDetails=function(e){var t={url:e,provider:"selfhostedvideo"},i=e.match(/^(?:https?:\/\/(?:m\.|www\.)?youtube\.com\/(?:[^/]+\/.+[=/]|watch[?/].*v=|embed\/)?([a-zA-Z0-9_-]{11})|https?:\/\/youtu\.be\/([a-zA-Z0-9_-]{11})).*/);if(i){var o=i?i[1]||i[2]:null;t.url="https://youtube.com/embed/"+o,t.provider="youtube"}if(i=e.match(/^https?:\/\/(?:www\.)?(?:player\.)?vimeo\.com\/(\d+)/)){var r=i?i[1]:null;t.url="https://player.vimeo.com/video/"+r,t.provider="vimeo"}if(/^(?:(?:https?:)?\/\/)?(?:www\.)?facebook\.com\/(?:watch\/\?v=|[\w\.]+\/videos\/(?:[\w\.]+\/)?)?(\d+)/.test(e)&&(t.provider="facebook"),i=e.match(/(?:dailymotion\.com\/(?:video|hub)\/|dai\.ly\/)([a-zA-Z0-9]+)/)){var n=i?i[1]:null;t.url="https://www.dailymotion.com/embed/video/"+n,t.provider="dailymotion"}return t},e}();document.addEventListener("DOMContentLoaded",function(){new ACF_Video_Input_Previewer});

